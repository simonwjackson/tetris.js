parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"qSE0":[function(require,module,exports) {

},{}],"dxJ8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=exports.createMatrix=function(r,e){for(var t=[];e--;)t.push(new Array(r).fill(0));return t},e=exports.rand=function(r,e){return r=Math.ceil(r),e=Math.floor(e),Math.floor(Math.random()*(e-r+1))+r};
},{}],"okcT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.createPiece=function(e){switch(e){case"O":return[[1,1],[1,1]];case"Z":return[[2,2,0],[0,2,2],[0,0,0]];case"S":return[[0,3,3],[3,3,0],[0,0,0]];case"J":return[[0,1,0],[0,1,0],[1,1,0]];case"L":return[[0,2,0],[0,2,0],[0,2,2]];case"I":return[[0,2,0,0],[0,2,0,0],[0,2,0,0],[0,2,0,0]];case"T":return[[0,0,0],[3,3,3],[0,3,0]]}},r=exports.hasCollision=function(e,r){var t=r.matrix,n=r.pos;return t.some(function(r,s){return r.some(function(r,u){return 0!==t[s][u]&&0!==(e[s+n.y]&&e[s+n.y][u+n.x])})})};
},{}],"IPY8":[function(require,module,exports) {
"use strict";require("./main.css");var e=require("./utils"),t=require("./core");module.hot&&module.hot.dispose(function(){throw window.location.reload(),"whatever"});var n=20,o=.1*n,i=[null,"hsl(203, 100%, 67%)","hsl(226, 96%, 56%)","hsl(0, 0%, 99%)"],r=document.getElementById("tetris"),l=r.getContext("2d"),s=(0,e.createMatrix)(10,20),c={pos:{x:0,y:0},matrix:null,score:0},a=0,f=1e3,u=0,h=function(){var e=1;e:for(var t=s.length-1;t>0;--t){for(var n=0;n<s[t].length;++n)if(0===s[t][n])continue e;var o=s.splice(t,1)[0].fill(0);s.unshift(o),++t,c.score+=10*e,e*=2}},m=function(e,t){t.matrix.map(function(n,o){n.map(function(n,i){0!==n&&(e[o+t.pos.y][i+t.pos.x]=n)})})},p=function(){c.pos.y++,(0,t.hasCollision)(s,c)&&(c.pos.y--,m(s,c),S(),h(),d(c.score),c.pos.y=0),a=0},d=function(e){document.getElementById("score").innerHTML=e},x=function(e){l.fillStyle="#000",l.fillRect(0,0,r.width,r.height),y(s,{x:0,y:0}),y(e.matrix,e.pos)},v=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=n-u;u=n,(a+=o)>f&&p(),x(t),requestAnimationFrame(e.bind(null,t))},y=function(e,t){e.map(function(e,r){e.map(function(e,l){0!==e&&g(i[e],l,r,t,n,o)})})},g=function(e,t,n,o,r,s){var c=r-s,a=(t+o.x)*r,f=(n+o.y)*r;l.fillStyle=e,l.fillRect(a,f,c,c),l.fillStyle="white",l.fillRect(a,f,2,2),l.fillRect(a+2,f+2,2,4),l.fillRect(a+2,f+2,4,2),"hsl(0, 0%, 99%)"===e&&(l.strokeStyle=i[1],l.lineWidth=3,l.strokeRect(a+1,f+1,c-2,c-2))},w=function(e){c.pos.x+=e,(0,t.hasCollision)(s,c)&&(c.pos.x-=e)},k=function(e,t){for(var n=0;n<e.length;++n)for(var o=0;o<n;++o){var i=[e[n][o],e[o][n]];e[o][n]=i[0],e[n][o]=i[1]}t>0?e.map(function(e){return e.reverse()}):e.reverse()},R=function(e){var n=c.pos.x,o=1;for(k(c.matrix,e);(0,t.hasCollision)(s,c);)if(c.pos.x+=o,(o=-(o+(o>0?1:-1)))>c.matrix[0].length)return k(c.matrix,-dir),void(c.pos.x=n)},S=function(){var n="ILJOTSZ"[(0,e.rand)(0,"ILJOTSZ".length-1)];c.matrix=(0,t.createPiece)(n),c.pos.y=0,c.pos.x=(s[0].length/2|0)-(c.matrix[0].length/2|0),(0,t.hasCollision)(s,c)&&(s.map(function(e){return e.fill(0)}),c.score=0,d())},b=function(e){document.addEventListener("keydown",function(e){switch(e.key){case"ArrowLeft":w(-1);break;case"ArrowRight":w(1);break;case"ArrowDown":p();break;case"q":R(1);break;case"w":R(-1)}})},q=function(){b(c),S(),d(c.score)};q(),v(c);
},{"./main.css":"qSE0","./utils":"dxJ8","./core":"okcT"}]},{},["IPY8"], null)
//# sourceMappingURL=tetris.ff202f0f.map